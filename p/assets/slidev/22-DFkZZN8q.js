import{o as s,c as r,k as a,q as o,s as c,A as l,e as t,a0 as e}from"../modules/vue-R_M4Yk7U.js";import{I as i}from"../default-pk3OXmvO.js";import{b as u,X as n}from"../index-DCFaiZ02.js";import{p,u as d,f as m}from"./context-Cfs-kS3b.js";import"../contents-aEssWFLO.js";import"../modules/shiki-DY4Y_Q5a.js";const _=t("h1",null,"沙箱设计",-1),x=t("h2",null,"ptrace 和 seccomp 限制系统调用",-1),g=t("ul",null,[t("li",null,[t("p",null,"从源代码层面限制危险行为没有意义，因为总可以通过宏定义绕过。")]),t("li",null,[t("p",null,[e("主流方法：通过 "),t("strong",null,"限制系统调用"),e(" 实现。")])]),t("li",null,[t("p",null,"主要有 ptrace（进程追踪） 和 seccomp（安全计算模式）两种方法")]),t("li",null,[t("p",null,[e("ptrace 有"),t("strong",null,"性能问题"),e("，每次系统调用都会引发上下文切换；seccomp 提前设定系统调用规则。")])])],-1),y=t("table",null,[t("thead",null,[t("tr",null,[t("th",{style:{"text-align":"center"}},"沙箱"),t("th",{style:{"text-align":"center"}},"CPU时间/ms"),t("th",{style:{"text-align":"center"}},"实际运行时间/ms")])]),t("tbody",null,[t("tr",null,[t("td",{style:{"text-align":"center"}},"ptrace"),t("td",{style:{"text-align":"center"}},"37047"),t("td",{style:{"text-align":"center"}},[t("strong",null,"75967")])]),t("tr",null,[t("td",{style:{"text-align":"center"}},"seccomp"),t("td",{style:{"text-align":"center"}},"13430"),t("td",{style:{"text-align":"center"}},"13504")]),t("tr",null,[t("td",{style:{"text-align":"center"}},"不使用"),t("td",{style:{"text-align":"center"}},"13076"),t("td",{style:{"text-align":"center"}},"13163")])])],-1),f={__name:"22",setup(h){return p(n),d(),(P,b)=>(s(),r(i,o(c(l(m)(l(n),21))),{default:a(()=>[_,x,g,y]),_:1},16))}},T=u(f,[["__file","/@slidev/slides/22.md"]]);export{T as default};
